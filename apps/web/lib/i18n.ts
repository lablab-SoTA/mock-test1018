import type { Locale, ProductType } from "@/lib/types";

const rawTranslations = {
  en: {
    "tab.revenue": "Revenue",
    "tab.acquisition": "Acquisition & Conversion",
    "tab.content": "Content",
    "tab.audience": "Audience",
    "header.export": "Export tab CSV",
    "header.exporting": "Exporting...",
    "header.filters": "Filters",
    "date.range": "Date range",
    "date.selectedRange": "Selected range {range}",
    "date.compare": "Compare",
    "date.groupBy": "Group by",
    "date.groupBy.aria": "Select aggregation granularity",
    "date.compare.none": "None",
    "date.compare.previous": "Previous period",
    "date.compare.yoy": "Year over year",
    "date.preset.today": "Today",
    "date.preset.yesterday": "Yesterday",
    "date.preset.last7": "Last 7 days",
    "date.preset.last30": "Last 30 days",
    "date.preset.thisMonth": "This month",
    "date.preset.prevMonth": "Previous month",
    "date.preset.custom": "Custom",
    "filter.platform": "Platform",
    "filter.country": "Country",
    "filter.device": "Device",
    "filter.userType": "User type",
    "filter.clear": "Clear filters",
    "filter.aria": "Global filters",
    "widget.options": "Widget options",
    "widget.downloadCsv": "Download CSV",
    "widget.toggleTable": "Toggle table view",
    "widget.definition": "Metric definition",
    "language.english": "English",
    "language.japanese": "日本語",
    "language.label": "Language",
    "date.groupBy.day": "Day",
    "date.groupBy.week": "Week",
    "date.groupBy.month": "Month",
    "kpi.definitionFor": "Definition for {label}",
    "kpi.delta.defaultUp": "vs previous",
    "kpi.delta.defaultDown": "vs previous",
    "kpi.delta.flat": "no change",
    "table.searchPlaceholder": "Search this table",
    "table.sortAria": "Sort by {column}",
    "table.showing": "Showing {count} of {total} rows",
    "table.previous": "Previous",
    "table.next": "Next",
    "table.page": "Page {current} / {total}",
    "revenue.loading": "Loading revenue data…",
    "revenue.error": "Failed to load revenue data.",
    "revenue.kpi.gross": "Gross revenue",
    "revenue.kpi.gross.help": "Total paid revenue before refunds, tax, and fees.",
    "revenue.kpi.net": "Net revenue",
    "revenue.kpi.net.help": "Revenue after refunds, discounts, and fees.",
    "revenue.kpi.payingUsers": "Paying users",
    "revenue.kpi.payingUsers.help": "Unique users with ≥1 purchase in range.",
    "revenue.kpi.paymentRate": "Payment rate",
    "revenue.kpi.paymentRate.help": "Paying users divided by active audience in range.",
    "revenue.kpi.churn": "Subscriber churn",
    "revenue.kpi.churn.delta": "Retention impact",
    "revenue.kpi.churn.help": "Cancellations divided by starting subscribers.",
    "revenue.delta.vsPrevious": "vs previous period",
    "revenue.delta.vsLastYear": "vs last year",
    "revenue.trend.title": "Revenue trend",
    "revenue.trend.descriptionAll": "Total revenue by period",
    "revenue.trend.descriptionProduct": "Revenue for {product}",
    "revenue.label": "Revenue",
    "common.date": "Date",
    "revenue.trend.tableAria": "Revenue trend table",
    "revenue.trend.chartAria": "Revenue over time",
    "revenue.mix.title": "Product mix",
    "revenue.mix.description": "Click a segment to filter other widgets",
    "revenue.mix.column.product": "Product",
    "revenue.mix.column.revenue": "Revenue",
    "revenue.mix.tableAria": "Revenue breakdown table",
    "revenue.mix.chartAria": "Revenue by product type",
    "revenue.payers.title": "Top paying users",
    "revenue.payers.description": "Top 10 customers by revenue.",
    "revenue.payers.column.user": "User",
    "revenue.payers.column.total": "Total revenue",
    "revenue.payers.column.orders": "Orders",
    "revenue.payers.column.aov": "Avg order",
    "revenue.payers.column.last": "Last purchase",
    "revenue.payers.tableAria": "Top paying users table",
    "revenue.transactions.title": "Transactions",
    "revenue.transactions.descriptionAll": "All transactions",
    "revenue.transactions.descriptionProduct": "Filtered to {product}",
    "product.all": "All products",
    "product.single": "Single purchase",
    "product.subscription": "Subscription",
    "product.tip": "Tip",
    "transactions.column.id": "Transaction ID",
    "transactions.column.paidAt": "Paid at",
    "transactions.column.user": "User",
    "transactions.column.product": "Product",
    "transactions.column.amount": "Amount",
    "transactions.column.tax": "Tax",
    "transactions.column.discount": "Discount",
    "transactions.column.status": "Status",
    "transactions.column.source": "Source",
    "transactions.column.platform": "Platform",
    "transactions.column.device": "Device",
    "transactions.column.country": "Country",
    "transactions.tableAria": "Transactions table",
    "acquisition.loading": "Loading acquisition data…",
    "acquisition.error": "Failed to load acquisition data.",
    "acquisition.kpi.visitToView": "Visit → Free view",
    "acquisition.kpi.visitToView.help": "Conversion rate from visits to first free view.",
    "acquisition.kpi.viewToPurchase": "Free view → Purchase",
    "acquisition.kpi.viewToPurchase.help": "Conversion rate from free view to first purchase.",
    "acquisition.kpi.externalShare": "External share",
    "acquisition.kpi.externalShare.help": "Share of visits coming from external sources.",
    "acquisition.kpi.avgTime": "Avg time to first purchase",
    "acquisition.kpi.avgTime.help": "Average hours from first visit to first purchase.",
    "acquisition.kpi.avgTime.value": "{hours} h",
    "acquisition.funnel.title": "Acquisition funnel",
    "acquisition.funnel.description": "Click a stage to focus the sources table.",
    "acquisition.funnel.column.stage": "Stage",
    "acquisition.funnel.column.volume": "Volume",
    "acquisition.funnel.column.cvr": "CVR",
    "acquisition.funnel.tableAria": "Acquisition funnel table",
    "acquisition.funnel.series.users": "Users",
    "acquisition.funnel.chartAria": "Acquisition funnel chart",
    "acquisition.funnel.stage.visit": "Visits",
    "acquisition.funnel.stage.freeView": "Free views",
    "acquisition.funnel.stage.purchase": "First purchases",
    "acquisition.platform.title": "Platform ARPU",
    "acquisition.platform.column.platform": "Platform",
    "acquisition.platform.column.arpu": "ARPU",
    "acquisition.platform.column.revenue": "Revenue",
    "acquisition.platform.tableAria": "Platform ARPU table",
    "acquisition.platform.series.arpu": "Average revenue per user",
    "acquisition.platform.chartAria": "Average revenue per user by platform",
    "acquisition.sources.title": "Sources performance",
    "acquisition.sources.description": "Performance of each acquisition source.",
    "acquisition.sources.descriptionFocused": "Focused on {stage}",
    "acquisition.sources.tableAria": "Acquisition sources table",
    "acquisition.sources.column.source": "Source",
    "acquisition.sources.column.visits": "Visits",
    "acquisition.sources.column.freeViews": "Free views",
    "acquisition.sources.column.purchases": "Purchases",
    "acquisition.sources.column.cvr": "CVR",
    "acquisition.sources.column.arpu": "ARPU",
    "acquisition.sources.column.revenue": "Revenue",
    "acquisition.mix.title": "Traffic mix",
    "acquisition.mix.column.date": "Date",
    "acquisition.mix.column.external": "External",
    "acquisition.mix.column.internal": "Internal",
    "acquisition.mix.column.direct": "Direct",
    "acquisition.mix.tableAria": "Traffic mix table",
    "acquisition.mix.series.external": "External",
    "acquisition.mix.series.internal": "Internal",
    "acquisition.mix.series.direct": "Direct",
    "acquisition.mix.chartAria": "Traffic source mix trend",
    "content.loading": "Loading content data…",
    "content.error": "Failed to load content data.",
    "content.table.title": "Title",
    "content.table.views": "Views",
    "content.table.uniqueViewers": "Unique viewers",
    "content.table.sales": "Sales",
    "content.table.revenue": "Revenue",
    "content.table.cvr": "CVR",
    "content.table.avgWatch": "Avg watch time",
    "content.table.avgWatchValue": "{seconds} sec",
    "content.kpi.topRevenue": "Top content revenue",
    "content.kpi.avgWatch": "Avg watch time",
    "content.kpi.avgWatch.help": "Average per content item.",
    "content.kpi.avgCvr": "Avg CVR",
    "content.kpi.engagement": "Engagement rate",
    "content.performance.title": "Content performance",
    "content.performance.description": "Click a row for details.",
    "content.performance.tableAria": "Content performance table",
    "content.top.title": "Top 5 by revenue",
    "content.top.column.title": "Title",
    "content.top.column.revenue": "Revenue",
    "content.top.column.views": "Views",
    "content.top.tableAria": "Top revenue content table",
    "content.top.series.revenue": "Revenue",
    "content.top.chartAria": "Top content by revenue",
    "content.watch.title": "Watch time trend",
    "content.watch.column.date": "Date",
    "content.watch.column.avg": "Avg watch time (sec)",
    "content.watch.tableAria": "Watch time trend table",
    "content.watch.series.avg": "Avg watch time",
    "content.watch.chartAria": "Watch time trend",
    "content.status.title": "Status distribution",
    "content.status.column.status": "Status",
    "content.status.column.count": "Count",
    "content.status.tableAria": "Content status summary",
    "content.status.draft": "Draft",
    "content.status.scheduled": "Scheduled",
    "content.status.published": "Published",
    "content.sheet.revenue": "Revenue",
    "content.sheet.sales": "Sales",
    "content.sheet.views": "Views",
    "content.sheet.cvr": "CVR",
    "content.sheet.avgWatch": "Average watch time",
    "content.sheet.engagement": "Engagement",
    "content.sheet.status": "Status",
    "audience.loading": "Loading audience data…",
    "audience.error": "Failed to load audience data.",
    "audience.kpi.active": "Active (5m)",
    "audience.kpi.retention7d": "7d retention",
    "audience.kpi.retention30d": "30d retention",
    "audience.kpi.churn": "Churn",
    "audience.followers.title": "Follower trend",
    "audience.followers.column.date": "Date",
    "audience.followers.column.total": "Total",
    "audience.followers.column.new": "New",
    "audience.followers.column.churned": "Churned",
    "audience.followers.tableAria": "Follower trend table",
    "audience.followers.series.total": "Total",
    "audience.followers.series.new": "New",
    "audience.followers.series.churned": "Churned",
    "audience.followers.chartAria": "Follower trend",
    "audience.retention.title": "Retention",
    "audience.retention.column.cohort": "Cohort",
    "audience.retention.column.retention": "Retention",
    "audience.retention.tableAria": "Retention table",
    "audience.retention.series.retention": "Retention",
    "audience.retention.chartAria": "Retention by cohort",
    "audience.cohort.7d": "7-day cohort",
    "audience.cohort.30d": "30-day cohort",
    "audience.cohort.90d": "90-day cohort",
    "audience.realtime.title": "Realtime",
    "audience.realtime.description": "Auto-refreshes every 60 seconds.",
    "audience.realtime.usersOnline": "users online",
    "audience.realtime.lastUpdated": "Last updated: {time}",
  },
  ja: {
    "tab.revenue": "売上",
    "tab.acquisition": "集客・CV",
    "tab.content": "コンテンツ",
    "tab.audience": "視聴者",
    "header.export": "タブのCSVをエクスポート",
    "header.exporting": "エクスポート中...",
    "header.filters": "フィルター",
    "date.range": "期間",
    "date.selectedRange": "選択中: {range}",
    "date.compare": "比較",
    "date.groupBy": "集計単位",
    "date.groupBy.aria": "集計粒度を選択",
    "date.compare.none": "なし",
    "date.compare.previous": "前期間",
    "date.compare.yoy": "前年同期比",
    "date.preset.today": "今日",
    "date.preset.yesterday": "昨日",
    "date.preset.last7": "直近7日間",
    "date.preset.last30": "直近30日間",
    "date.preset.thisMonth": "今月",
    "date.preset.prevMonth": "先月",
    "date.preset.custom": "カスタム",
    "filter.platform": "プラットフォーム",
    "filter.country": "国",
    "filter.device": "デバイス",
    "filter.userType": "ユーザー種別",
    "filter.clear": "フィルターをクリア",
    "filter.aria": "全体フィルター",
    "widget.options": "ウィジェットオプション",
    "widget.downloadCsv": "CSVをダウンロード",
    "widget.toggleTable": "表ビューに切替",
    "widget.definition": "指標の定義",
    "language.english": "English",
    "language.japanese": "日本語",
    "language.label": "言語",
    "date.groupBy.day": "日",
    "date.groupBy.week": "週",
    "date.groupBy.month": "月",
    "kpi.definitionFor": "{label}の定義",
    "kpi.delta.defaultUp": "前期間比",
    "kpi.delta.defaultDown": "前期間比",
    "kpi.delta.flat": "変化なし",
    "table.searchPlaceholder": "テーブル内を検索",
    "table.sortAria": "{column}で並べ替え",
    "table.showing": "{total}件中{count}件を表示",
    "table.previous": "前へ",
    "table.next": "次へ",
    "table.page": "{current}/{total}ページ",
    "revenue.loading": "売上データを読み込み中…",
    "revenue.error": "売上データの取得に失敗しました。",
    "revenue.kpi.gross": "総売上",
    "revenue.kpi.gross.help": "返金・税・手数料を控除する前の総売上。",
    "revenue.kpi.net": "純売上",
    "revenue.kpi.net.help": "返金・割引・手数料を差し引いた売上。",
    "revenue.kpi.payingUsers": "課金ユーザー",
    "revenue.kpi.payingUsers.help": "期間内に1回以上購入したユニークユーザー数。",
    "revenue.kpi.paymentRate": "課金率",
    "revenue.kpi.paymentRate.help": "対象期間のアクティブユーザーに対する課金ユーザーの割合。",
    "revenue.kpi.churn": "サブスク解約率",
    "revenue.kpi.churn.delta": "継続率への影響",
    "revenue.kpi.churn.help": "期首有効会員に対する解約の割合。",
    "revenue.delta.vsPrevious": "前期間比",
    "revenue.delta.vsLastYear": "前年同期比",
    "revenue.trend.title": "売上トレンド",
    "revenue.trend.descriptionAll": "期間別の総売上",
    "revenue.trend.descriptionProduct": "{product}の売上",
    "revenue.label": "売上",
    "common.date": "日付",
    "revenue.trend.tableAria": "売上トレンドの表",
    "revenue.trend.chartAria": "期間ごとの売上推移",
    "revenue.mix.title": "商品別構成",
    "revenue.mix.description": "セグメントをクリックすると他ウィジェットに反映",
    "revenue.mix.column.product": "商品",
    "revenue.mix.column.revenue": "売上",
    "revenue.mix.tableAria": "売上構成の表",
    "revenue.mix.chartAria": "商品別の売上構成",
    "revenue.payers.title": "課金上位ユーザー",
    "revenue.payers.description": "売上金額が多い上位10ユーザー。",
    "revenue.payers.column.user": "ユーザー",
    "revenue.payers.column.total": "累計売上",
    "revenue.payers.column.orders": "注文数",
    "revenue.payers.column.aov": "平均単価",
    "revenue.payers.column.last": "最終購入日時",
    "revenue.payers.tableAria": "課金上位ユーザーの表",
    "revenue.transactions.title": "取引",
    "revenue.transactions.descriptionAll": "すべての取引",
    "revenue.transactions.descriptionProduct": "{product}に絞り込み",
    "product.all": "すべて",
    "product.single": "単品購入",
    "product.subscription": "サブスクリプション",
    "product.tip": "投げ銭",
    "transactions.column.id": "取引ID",
    "transactions.column.paidAt": "支払い日時",
    "transactions.column.user": "ユーザー",
    "transactions.column.product": "商品",
    "transactions.column.amount": "金額",
    "transactions.column.tax": "税額",
    "transactions.column.discount": "割引",
    "transactions.column.status": "ステータス",
    "transactions.column.source": "流入元",
    "transactions.column.platform": "プラットフォーム",
    "transactions.column.device": "デバイス",
    "transactions.column.country": "国",
    "transactions.tableAria": "取引テーブル",
    "acquisition.loading": "集客データを読み込み中…",
    "acquisition.error": "集客データの取得に失敗しました。",
    "acquisition.kpi.visitToView": "訪問 → 無料視聴",
    "acquisition.kpi.visitToView.help": "訪問から無料視聴への転換率。",
    "acquisition.kpi.viewToPurchase": "無料視聴 → 初回購入",
    "acquisition.kpi.viewToPurchase.help": "無料視聴から初回購入への転換率。",
    "acquisition.kpi.externalShare": "外部流入比率",
    "acquisition.kpi.externalShare.help": "外部流入が占める訪問割合。",
    "acquisition.kpi.avgTime": "初回購入までの平均時間",
    "acquisition.kpi.avgTime.help": "初回訪問から初回購入までの平均時間（時間）。",
    "acquisition.kpi.avgTime.value": "{hours} 時間",
    "acquisition.funnel.title": "集客ファネル",
    "acquisition.funnel.description": "段をクリックすると流入元テーブルに反映されます。",
    "acquisition.funnel.column.stage": "段階",
    "acquisition.funnel.column.volume": "人数",
    "acquisition.funnel.column.cvr": "CVR",
    "acquisition.funnel.tableAria": "集客ファネルの表",
    "acquisition.funnel.series.users": "ユーザー数",
    "acquisition.funnel.chartAria": "集客ファネルのグラフ",
    "acquisition.funnel.stage.visit": "訪問",
    "acquisition.funnel.stage.freeView": "無料視聴",
    "acquisition.funnel.stage.purchase": "初回購入",
    "acquisition.platform.title": "プラットフォーム別ARPU",
    "acquisition.platform.column.platform": "プラットフォーム",
    "acquisition.platform.column.arpu": "ARPU",
    "acquisition.platform.column.revenue": "売上",
    "acquisition.platform.tableAria": "プラットフォーム別ARPUの表",
    "acquisition.platform.series.arpu": "ユーザー当たり売上",
    "acquisition.platform.chartAria": "プラットフォーム別ユーザー当たり売上",
    "acquisition.sources.title": "流入元のパフォーマンス",
    "acquisition.sources.description": "各流入元のパフォーマンスを表示。",
    "acquisition.sources.descriptionFocused": "{stage}にフォーカスしています",
    "acquisition.sources.tableAria": "流入元テーブル",
    "acquisition.sources.column.source": "流入元",
    "acquisition.sources.column.visits": "訪問",
    "acquisition.sources.column.freeViews": "無料視聴",
    "acquisition.sources.column.purchases": "初回購入",
    "acquisition.sources.column.cvr": "CVR",
    "acquisition.sources.column.arpu": "ARPU",
    "acquisition.sources.column.revenue": "売上",
    "acquisition.mix.title": "トラフィック構成",
    "acquisition.mix.column.date": "日付",
    "acquisition.mix.column.external": "外部",
    "acquisition.mix.column.internal": "内部",
    "acquisition.mix.column.direct": "ダイレクト",
    "acquisition.mix.tableAria": "トラフィック構成の表",
    "acquisition.mix.series.external": "外部",
    "acquisition.mix.series.internal": "内部",
    "acquisition.mix.series.direct": "ダイレクト",
    "acquisition.mix.chartAria": "トラフィック構成の推移",
    "content.loading": "コンテンツデータを読み込み中…",
    "content.error": "コンテンツデータの取得に失敗しました。",
    "content.table.title": "タイトル",
    "content.table.views": "視聴数",
    "content.table.uniqueViewers": "ユニーク視聴者",
    "content.table.sales": "販売数",
    "content.table.revenue": "売上",
    "content.table.cvr": "CVR",
    "content.table.avgWatch": "平均視聴時間",
    "content.table.avgWatchValue": "{seconds} 秒",
    "content.kpi.topRevenue": "トップコンテンツ売上",
    "content.kpi.avgWatch": "平均視聴時間",
    "content.kpi.avgWatch.help": "コンテンツ1本あたりの平均値。",
    "content.kpi.avgCvr": "平均CVR",
    "content.kpi.engagement": "エンゲージメント率",
    "content.performance.title": "コンテンツパフォーマンス",
    "content.performance.description": "行をクリックすると詳細を表示します。",
    "content.performance.tableAria": "コンテンツパフォーマンスの表",
    "content.top.title": "売上トップ5",
    "content.top.column.title": "タイトル",
    "content.top.column.revenue": "売上",
    "content.top.column.views": "視聴数",
    "content.top.tableAria": "売上トップコンテンツの表",
    "content.top.series.revenue": "売上",
    "content.top.chartAria": "売上上位のコンテンツ",
    "content.watch.title": "視聴時間の推移",
    "content.watch.column.date": "日付",
    "content.watch.column.avg": "平均視聴時間（秒）",
    "content.watch.tableAria": "視聴時間推移の表",
    "content.watch.series.avg": "平均視聴時間",
    "content.watch.chartAria": "視聴時間の推移",
    "content.status.title": "ステータス別件数",
    "content.status.column.status": "ステータス",
    "content.status.column.count": "件数",
    "content.status.tableAria": "ステータス別まとめ",
    "content.status.draft": "下書き",
    "content.status.scheduled": "公開予定",
    "content.status.published": "公開中",
    "content.sheet.revenue": "売上",
    "content.sheet.sales": "販売数",
    "content.sheet.views": "視聴数",
    "content.sheet.cvr": "CVR",
    "content.sheet.avgWatch": "平均視聴時間",
    "content.sheet.engagement": "エンゲージメント",
    "content.sheet.status": "ステータス",
    "audience.loading": "視聴者データを読み込み中…",
    "audience.error": "視聴者データの取得に失敗しました。",
    "audience.kpi.active": "アクティブ（5分）",
    "audience.kpi.retention7d": "7日リテンション",
    "audience.kpi.retention30d": "30日リテンション",
    "audience.kpi.churn": "離脱率",
    "audience.followers.title": "フォロワー推移",
    "audience.followers.column.date": "日付",
    "audience.followers.column.total": "合計",
    "audience.followers.column.new": "新規",
    "audience.followers.column.churned": "離脱",
    "audience.followers.tableAria": "フォロワー推移の表",
    "audience.followers.series.total": "合計",
    "audience.followers.series.new": "新規",
    "audience.followers.series.churned": "離脱",
    "audience.followers.chartAria": "フォロワー推移",
    "audience.retention.title": "リテンション",
    "audience.retention.column.cohort": "コホート",
    "audience.retention.column.retention": "リテンション",
    "audience.retention.tableAria": "リテンションの表",
    "audience.retention.series.retention": "リテンション",
    "audience.retention.chartAria": "コホート別リテンション",
    "audience.cohort.7d": "7日コホート",
    "audience.cohort.30d": "30日コホート",
    "audience.cohort.90d": "90日コホート",
    "audience.realtime.title": "リアルタイム",
    "audience.realtime.description": "60秒ごとに自動更新されます。",
    "audience.realtime.usersOnline": "人がオンライン",
    "audience.realtime.lastUpdated": "最終更新: {time}",
  },
} as const;

type RawTranslations = typeof rawTranslations;

export type TranslationKey = keyof RawTranslations["en"];

type TranslationDictionary = {
  [locale in Locale]: { [key in TranslationKey]: string };
};

export const translations: TranslationDictionary = rawTranslations;

export const supportedLocales: Locale[] = ["en", "ja"];

export const productLabelKeys: Record<ProductType, TranslationKey> = {
  single: "product.single",
  subscription: "product.subscription",
  tip: "product.tip",
};

export function translate(locale: Locale, key: TranslationKey, params?: Record<string, string | number>) {
  const template = translations[locale][key] ?? translations.en[key] ?? key;
  return replaceParams(template, params);
}

export function getLocaleLabel(locale: Locale) {
  return locale === "ja" ? translations.ja["language.japanese"] : translations.en["language.english"];
}

function replaceParams(template: string, params?: Record<string, string | number>) {
  if (!params) return template;
  return template.replace(/\{(\w+)\}/g, (match, parameter) => {
    if (params[parameter] === undefined) return match;
    return String(params[parameter]);
  });
}
